{% extends "base_status.html" %}

{% block title %}Hosts{% endblock %}
{% block nav2 %}
    <a href="{% url status.views.status_host %}">Hosts</a>
    {% if host_name %}
    / {{ host_name }}
    {% else %}
    {% endif %}
{% endblock %}
{% block smallheader %}
    {% if hostgroup_name %}host
    {% endif %}
{% endblock %}
{% block largeheader %}
    {% if host_name %}{{ host_name }}
    {% else %}
    Hosts
    {% endif %}
{% endblock %}

{% block content %}


<table class="table well table-condensed searchtable" id="table" style="font-size:12px;" >
    <tr>
        <th></th>
        <th>Host Name</th>
        <th>Address</th>
        <th>Host Status</th>
        <th>Service Status</th>
    </tr>
    <tbody>
    {% for row in hosts %}
        <tr class="mainrow" id="row_{{ forloop.counter }}" onclick='$(".subrow_{{ forloop.counter }}").toggle();'>
            <td class=small style="cursor: pointer;">
                <div class="subrow_{{ forloop.counter }}">&#x25b7;</div>
                <div class="subrow_{{ forloop.counter }} hide">&#x25bd;</div>
            </td>
            <td>
                <a id="{{ row.name }}" href="{% url status.views.status_detail %}?host_name={{ row.name }}">
                    {{ row.name }}
                </a>
            </td>
            <td>{{ row.address }}</td>
            {% if row.state  == 0 %}
                <td class="alert alert-success">UP</td>
            {% else %}
                <td class="alert alert-danger">Down</td>
            {% endif %}
            <td>
                    <div class="progress" >
                        <div class="bar bar-success" style="width: {{ row.percent_ok }}%;"></div>
                        <div class="bar bar-warning" style="width: {{ row.percent_warn }}%;"></div>
                        <div class="bar bar-danger" style="width: {{ row.percent_crit }}%;"></div>
                        <div class="bar bar-info" style="width: {{ row.percent_unknown }}%;"></div>
                    </div>
            </td>
        </tr>
            {% for i in row.services %}
                <tr class="subrow {{ row.name }} subrow_{{ forloop.parentloop.counter }} hide">
                    <td></td>
                    <td colspan=4>
                        <div style="margin-left: 10px;" class="circle state_{{ i.state }}"></div>
                        <a href="{% url status.views.status_detail %}?host_name={{ row.name }}&service_description={{ i.description }}">{{i.description }}</a>
                    </td>
                </tr>
            {% endfor %}
    {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block header %} {{ block.super }}
{% endblock %}




{% block head %}
{% endblock %}