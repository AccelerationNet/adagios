{% extends "base.html" %}

{% block title %}List of object Types{% endblock %}
{% block footer %}
    <script type="text/javascript" xmlns="http://www.w3.org/1999/html">
        $(document).ready(function() {
            			/* Default class modification */
			$.extend( $.fn.dataTableExt.oStdClasses, {
				"sSortAsc": "header headerSortDown",
				"sSortDesc": "header headerSortUp",
				"sSortable": "header"
			} );
            commands = [];
            $.getJSON("/rest/pynag/json/get_objects",
                {
                    object_type: "command",
                    with_fields: "id,command_name,name,command_line",
                },
                function(data) {
                    $.each(data, function(i,item){
                        commands.push(["f", "" + item.command_name, "" + item.command_line.substr(0, 40)])




                    });
                    var t = $('#testtable').dataTable( {
                        "aaData": commands,
                        "sDom": "<'row'<'span1'><'offset4 span5'f>r>t<'row'<'span4'i><'span4'p>>",
                        "sPaginationType": "bootstrap",
                        "sScrollY": "160px",
                        "bPaginate": false,
                        "bScrollCollapse": true,
                        "oLanguage": {
                            "sLengthMenu": "_MENU_ records per page"
                        }
                    } );
                }
            );

            $(function () {
                $('#myTab a:first').tab('show');
                t.fnAdjustColumnSizing();
            });


        } );

      </script>
{% endblock %}
{% block content %}

      <div class="row">
        <div class="span12">
          <div class="block">
            <h2 style="text-align: center">
              <i class="icon-th-large"></i> Object Overview
            </h2>
          </div>
        </div>
      </div>
{% if object_types %}

      <div class="row">
        <div class="span3">
          <div class="block">
	        <table style="width: 100%" id="objectoverview">
	          <thead>
	            <tr>
		          <th>Type</th>
		          <th>Active</th>
		          <th>Inactive</th>
	            </tr>
	          </thead>
	          <tbody>
	{% for i in object_types %}
		        <tr class="{% cycle 'even' 'odd' %}">
			      <td><a href="search?object_type={{ i.name }}">{{ i.name }}</a></td>
			      <td class="center"><a href="search?object_type={{ i.name }}&register=1">{{ i.active }}</a></td>
			      <td class="center"><a href="search?object_type={{ i.name }}&register=0">{{ i.inactive }}</a></td>
		        </tr>
	{% endfor %}
	          </tbody>
            </table>
          </div>
        </div>

        <div class="span9">
            <div class="block">
                <ul class="nav nav-tabs" id="myTab">
                  <li><a href="#command" data-toggle="tab">Commands</a></li>
                  <li><a href="#contact" data-toggle="tab">Contacts</a></li>
                  <li><a href="#host" data-toggle="tab">Hosts</a></li>
                  <li><a href="#service" data-toggle="tab">Services</a></li>
                  <li><a href="#timeperiod" data-toggle="tab">Timeperiods</a></li>
                </ul>
                <div class="tab-content">
                  <div class="tab-pane" id="command">
                      <table id="testtable" style="width: 100%" class="table table-striped">
                          <thead>
                            <tr>
                              <th class="span1"></th>
                              <th>Command Name</th>
                              <th>Command Line</th>
                            </tr>
                          </thead>
                          <tbody>

                        </tbody>
                      </table>
                  </div>
                  <div class="tab-pane" id="contact"></div>
                  <div class="tab-pane active" id="host"></div>
                  <div class="tab-pane" id="service"></div>
                  <div class="tab-pane" id="timeperiod"></div>
                </div>
            </div>
            <script>


            </script>
        </div>
      </div>


{% else %}
	  <p>List of object types not found </p>
{% endif %}

    <div class="row">
      <div class="span12">
        <div class="block">
          <h5 style="border-bottom: 1px solid #ccc">Most Recent Changes</h5>
          <table class="log">
            <thead>
              <th>Time</th>
              <th>User</th>
              <th>What</th>
            </thead>
            <tbody>

{% for logentry in gitlog %}
              <tr>
                <td>{{ logentry.authortime|date:"j M Y, H:i" }}</td>
                <td>{{ logentry.author }} &lt;{{ logentry.authoremail }}&gt;</td>
                <td>{{ logentry.comment }}</td>
              </tr>
{% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
{% endblock %}
