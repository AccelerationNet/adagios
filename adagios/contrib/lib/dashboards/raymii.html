<html><head> 
    <title>Service Status Dashboard - My Company</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Remy van Elst">
    <meta http-equiv="refresh" content="30">
    <link href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/united/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
        a {
            color: #333 !important;
        }
        .alert { 
            padding:5px 13px !important;
            border-radius: 0px !important;
            margin-bottom: 2px !important;
        }

        .is_hidden {
          display: none;
        }

    </style>
<style type="text/css"></style></head>
<body>

    <div class="row">
        <div class="col-md-12">
            <h1>Service Status Dashboard - My Company</h1>
        </div>
    </div>

    <div id="debug_statistics" class="is_hidden">
        <pre>
            {% for k,v in statistics.items %}{{ k }} = {{ v }}
            {% endfor %}
        </pre>
    </div>

    <div class="row">
        <div class="col-md-12">
            <span id="number_of_hosts">{{ statistics.total_hosts }}</span> Hosts<br>
            <span id="number_of_services">{{ statistics.total_services }}</span> Services<br>
            <div class="alert alert-danger">
                <h2>
                    <span id="number_of_critical_issues">{{ statistics.total_service_problems }}</span> Issues.
                    <span id="number_of_hosts_down">{{ statistics.unhandled_hosts }}</span> Hosts Down!
                </h2>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">

        <h3>Hosts Down</h3>
        <div id="list_of_hosts_down">
            {% for i in hosts %}
                {% if i.state != 0 and i.acknowledged != 1 %}
                    <div class="alert alert-danger">
                        <a href="{% url adagios.status.views.status_detail %}?host_name={{ i.name }}"># <b>{{ i.name }}</b></a>
                        {{ i.plugin_output }}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <div id="no_hosts_down" class="is_hidden alert alert-success"><span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; <span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; No Unhandled Host Problems!</div>


        <h3>Critical Issues</h3>
        <div id="list_of_critical_issues">
                {% for i in services %}
                    {% if i.state == 2 and i.acknowledged != 1 %}

                        <div class="alert alert-danger">
                            <a href="{% url adagios.status.views.status_detail %}?host_name={{ i.host_name }}&service_description={{ i.description }}">
                                # <b>{{ i.description }}</b> on <i>{{ i.host_name }}</i> </a>{{ i.plugin_output }}
                        </div>

                   {% endif %}
                {% endfor %}
        </div>
        <div id="no_critical_issues" class="is_hidden alert alert-success"><span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; <span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; No Critical Issues!</div>


        <h3>Hosts Acknowledged Down</h3>
        <div id="list_of_hosts_acknowledged">
            {% for i in hosts %}
                {% if i.state != 0 %}
                    {% if i.acknowledged == 1 or i.downtime_depth != 0  %}
                        <div class="alert alert-info">
                            <a href="{% url adagios.status.views.status_detail %}?host_name={{ i.name }}">
                                # <b>{{ i.name }}</b>
                            </a>
                            {{ i.plugin_output }}
                        </div>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
        <div id="no_hosts_acknowledged" class="is_hidden alert alert-success"><span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; <span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; No Acknowledged host problems!</div>



    </div>

    <div class="col-md-6">

        <h3>Minor Issues </h3>
        <div id="list_of_minor_issues">
            {% for i in services %}

                {% if i.state != 0 and i.acknowledged != 0  %}
                    <div class="alert alert-warning">
                        <a href="{% url adagios.status.views.status_detail %}?host_name={{ i.host_name }}&service_description={{ i.description }}">
                            # <b>{{ i.description }}</b> on <i>{{ i.host_name }}</i> </a>
                        {{ i.plugin_output }}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <div id="no_minor_issues" class="is_hidden alert alert-success"><span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; <span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; No Unhandled Minor Issues!</div>

        <h3>Acknowledged Minor Issues</h3>
        <div id="list_of_acknowledged_minor_issues">
                    {% for i in services %}
                    {% if i.state == 1 and i.acknowledged == 1 %}
                        <div class="alert alert-info">
                            <a href="{% url adagios.status.views.status_detail %}?host_name={{ i.host_name }}&service_description={{ i.description }}">
                                # <b>{{ i.description }}</b> on <i>{{ i.host_name }}</i> </a>{{ i.plugin_output }}
                        </div>
                   {% endif %}
                {% endfor %}
        </div>
        <div id="no_acknowledged_minor_issues" class="alert alert-success is_hidden"><span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; <span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; No Acknowledged Minor Issues!</div>


        <h3>Acknowledged Criticals</h3>
        <div id="list_of_acknowledged_critical_issues">
                    {% for i in services %}
                    {% if i.state == 2 and i.acknowledged == 1 %}
                        <div class="alert alert-info">
                            <a href="{% url adagios.status.views.status_detail %}?host_name={{ i.host_name }}&service_description={{ i.description }}">
                                # <b>{{ i.description }}</b> on <i>{{ i.host_name }}</i> </a>{{ i.plugin_output }}
                        </div>
                   {% endif %}
                {% endfor %}
        </div>
        <div id="no_acknowledged_critical_issues" class="is_hidden alert alert-success"><span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; <span class="glyphicon glyphicon-thumbs-up"> </span> &nbsp; No Acknowledged Critical Issues!</div>

    </div>
</div>

<br>

<div class="row">
    <div class="container text-center">
    <span>Based on php dashboard by <a href="https://raymii.org">Remy van Elst (code)</a> and <a href="https://github.com/JobV">Job van der Voort (design)</a>.</span>
    </div>
</div>



<!-- Placed at the end of the document so the pages load faster -->
<script src="/rest/pynag.js"></script>
<script src="/rest/status.js"></script>
<script src="/rest/okconfig.js"></script>


<script src="/media/jquery/jquery-1.9.1.min.js"></script>
<script src="/media/bootstrap/js/bootstrap.min.js"></script>

<script src="/media/datatables/js/jquery.dataTables.min.js"></script>
<script src="/media/datatables/js/pagination.js"></script>
<script src="/media/datatables/DT_bootstrap.js"></script>

<script src="/media/select2/select2.min.js" type="text/javascript"></script>
<script src="/media/js/adagios.js"></script>
<script src="/media/js/adagios_status.js"></script>


    <script type="text/javascript" xmlns="http://www.w3.org/1999/html">
        $(document).ready(function() {
            // Make sure that for each "problem" box that is empty, we will show a corresponding "ok" box.
            if ($("#list_of_hosts_down div").length == 0) {
                $("#no_hosts_down").show();
            }
            if ($("#list_of_acknowledged_minor_issues div").length == 0) {
                $("#no_acknowledged_minor_issues").show();
            }
            if ($("#list_of_critical_issues div").length == 0) {
                $("#no_critical_issues").show();
            }
            if ($("#list_of_minor_issues div").length == 0) {
                $("#no_minor_issues").show();
            }
            if ($("#list_of_hosts_acknowledged div").length == 0) {
                $("#no_hosts_acknowledged").show();
            }
            if ($("#list_of_acknowledged_critical_issues div").length == 0) {
                $("#no_acknowledged_critical_issues").show();
            }
            if ($("#list_of_acknowledged_minor_issues div").length == 0) {
                $("#no_acknowledged_minor_issues").show();
            }
        });


</script>
</body>
</html>
